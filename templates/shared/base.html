<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{% block title %}EduPlay Rural{% endblock %}</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- AdminLTE -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">

  <!-- FontAwesome -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.2/css/all.min.css">

  <style>
    /* Smooth theme transition */
    body {
      transition: background-color 0.3s, color 0.3s;
    }

    .dark-mode {
      --bg-color: #121212;
      --text-color: #e0e0e0;
    }

    .dark-mode .content-wrapper,
    .dark-mode .main-footer {
      background-color: #1e1e1e !important;
      color: var(--text-color) !important;
    }

    .dark-mode .main-sidebar {
      background-color: #1c1c1c !important;
    }

    .dark-mode .nav-link,
    .dark-mode .brand-text,
    .dark-mode .nav-header {
      color: var(--text-color) !important;
    }

    .dark-mode .card {
      background-color: #2a2a2a;
      color: var(--text-color);
      border-color: #444;
    }

    .theme-toggle {
      cursor: pointer;
      font-size: 1.2rem;
      transition: transform 0.2s;
    }

    .theme-toggle:hover {
      transform: rotate(20deg);
    }
  </style>
</head>

<body class="hold-transition sidebar-mini layout-fixed">
  <div class="wrapper">

    <!-- Navbar -->
    <nav class="main-header navbar navbar-expand navbar-white navbar-light border-bottom">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" data-widget="pushmenu" href="#"><i class="fas fa-bars"></i></a>
        </li>
        <li class="nav-item d-none d-sm-inline-block">
          <a href="/" class="nav-link"><i class="fas fa-home"></i> Home</a>
        </li>
      </ul>

      <ul class="navbar-nav ms-auto">
        <!-- Dark/Light Mode Toggle -->
        <li class="nav-item">
          <a class="nav-link theme-toggle" id="themeToggle"><i class="fas fa-moon"></i></a>
        </li>

        <li class="nav-item">
          <form method="post" action="{% url 'logout' %}" style="display:inline;">
            {% csrf_token %}
            <button type="submit" class="nav-link btn btn-link text-danger"
              style="border:none; background:none; padding:0;">
              <i class="fas fa-sign-out-alt"></i> Logout
            </button>
          </form>
        </li>
      </ul>
    </nav>

    <!-- Sidebar -->
    <aside class="main-sidebar sidebar-dark-primary elevation-4">
      <a href="/" class="brand-link text-center">
        <i class="fas fa-gamepad"></i>
        <span class="brand-text font-weight-bold">EduPlay Rural</span>
      </a>

      <div class="sidebar">
        <nav class="mt-2">
          <ul class="nav nav-pills nav-sidebar flex-column" data-widget="treeview">
            <li class="nav-item"><a href="{% url 'dashboard' %}" class="nav-link"><i
                  class="nav-icon fas fa-tachometer-alt"></i>
                <p>Dashboard</p>
              </a></li>
            <li class="nav-item"><a href="{% url 'profile' %}" class="nav-link"><i class="nav-icon fas fa-user"></i>
                <p>Profile</p>
              </a></li>
            <li class="nav-item"><a href="{% url 'subjects' %}" class="nav-link"><i class="nav-icon fas fa-book"></i>
                <p>Subjects</p>
              </a></li>
            <li class="nav-item"><a href="{% url 'quizzes_subjects' %}" class="nav-link"><i
                  class="nav-icon fas fa-question-circle"></i>
                <p>Quizzes</p>
              </a></li>
            <li class="nav-item"><a href="{% url 'progress' %}" class="nav-link"><i
                  class="nav-icon fas fa-chart-line"></i>
                <p>Progress</p>
              </a></li>
            <li class="nav-item"><a href="{% url 'notebook' %}" class="nav-link"><i
                  class="nav-icon fas fa-pencil-alt"></i>
                <p>Smart Notebook</p>
              </a></li>
            <li class="nav-item"><a href="{% url 'leaderboard' %}" class="nav-link"><i
                  class="nav-icon fas fa-trophy"></i>
                <p>Leaderboard</p>
              </a></li>
            <li class="nav-item"><a href="{% url 'chatbot' %}" class="nav-link"><i class="nav-icon fas fa-robot"></i>
                <p>Chatbot</p>
              </a></li>
          </ul>
        </nav>
      </div>
    </aside>

    <!-- Main Content -->
    <div class="content-wrapper p-4">
      {% block content %}{% endblock %}
    </div>

    <!-- Footer -->
    <footer class="main-footer text-center">
      <strong>Copyright &copy; {{ now|date:"Y" }} <a href="/">EduPlay Rural</a>.</strong>
      All rights reserved. <br>
      <small>Design &amp; Developed by <b>Shivam Kamal</b></small>
    </footer>

  </div>

  <!-- Scripts -->
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.4/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>

  <script>
    // Theme toggle
    const body = document.body;
    const toggleBtn = document.getElementById('themeToggle');
    const icon = toggleBtn.querySelector('i');

    // Load saved theme
    if (localStorage.getItem('theme') === 'dark') {
      body.classList.add('dark-mode');
      icon.classList.replace('fa-moon', 'fa-sun');
    }

    toggleBtn.addEventListener('click', () => {
      body.classList.toggle('dark-mode');
      const isDark = body.classList.contains('dark-mode');
      icon.classList.replace(isDark ? 'fa-moon' : 'fa-sun', isDark ? 'fa-sun' : 'fa-moon');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
    });
  </script>
</body>

</html>
