{% extends 'shared/base.html' %}
{% block title %}Poetry Quiz Game{% endblock %}

{% block content %}
<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: linear-gradient(#f5e6ff, #d4b3ff);
  text-align: center;
  overflow-x: hidden;
}
h1 {
  background-color: #6a1b9a;
  color: white;
  margin: 0;
  padding: 20px;
  font-size: 32px;
}
.intro {
  background: white;
  width: 80%;
  max-width: 700px;
  margin: 20px auto;
  padding: 20px;
  border-radius: 12px;
  box-shadow: 0 6px 15px rgba(0,0,0,0.2);
}
.intro button {
  padding: 12px 30px;
  font-size: 18px;
  background: #6a1b9a;
  color: white;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  margin-top: 15px;
}
#gameArea {
  display: none;
  position: relative;
  height: 500px;
  margin-top: 20px;
}
.bubble {
  position: absolute;
  background-color: #ff80ab;
  color: white;
  border-radius: 50%;
  width: 120px;
  height: 120px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: bold;
  cursor: pointer;
  transition: 0.3s;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}
.bubble:hover {
  transform: scale(1.1);
}
#score {
  margin-top: 15px;
  font-size: 22px;
  font-weight: bold;
  color: #333;
}
#message {
  font-size: 26px;
  color: #d32f2f;
  font-weight: bold;
  margin-top: 10px;
  white-space: pre-line;
}
.controls {
  margin-top: 20px;
}
.controls button {
  padding: 10px 20px;
  margin: 5px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-size: 16px;
  background: #6a1b9a;
  color: white;
  transition: 0.3s;
}
.controls button:hover {
  background: #4b0082;
}
</style>

<h1>üå∏ Poetry Quiz Game</h1>

<div class="intro" id="intro">
  <h2>‡§™‡§∞‡§ø‡§ö‡§Ø</h2>
  <p>‡§á‡§∏ ‡§ñ‡•á‡§≤ ‡§Æ‡•á‡§Ç ‡§Ü‡§™‡§ï‡•Ä ‡§ö‡•Å‡§®‡•å‡§§‡•Ä ‡§π‡•à:</p>
  <ul style="text-align:left;">
    <li>‡§™‡•ç‡§∞‡§§‡•ç‡§Ø‡•á‡§ï ‡§ï‡§µ‡§ø‡§§‡§æ‡§ì‡§Ç ‡§∏‡•á ‡§ú‡•Å‡§°‡§º‡§æ ‡§∏‡§µ‡§æ‡§≤ ‡§™‡•ù‡•á‡§Ç‡•§</li>
    <li>‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞ ‡§µ‡§æ‡§≤‡•á bubble ‡§™‡§∞ ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç‡•§</li>
    <li>‡§∏‡§π‡•Ä ‡§â‡§§‡•ç‡§§‡§∞ ‡§™‡§∞ +10 ‡§Ö‡§Ç‡§ï, ‡§ó‡§≤‡§§ ‡§â‡§§‡•ç‡§§‡§∞ ‡§™‡§∞ -5 ‡§Ö‡§Ç‡§ï‡•§</li>
    <li>‡§Ö‡§ß‡§ø‡§ï ‡§Ö‡§Ç‡§ï = ‡§¨‡•á‡§π‡§§‡§∞ ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§®‡•§</li>
  </ul>
  <button onclick="startGame()">‡§ñ‡•á‡§≤ ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡•á‡§Ç</button>
</div>

<div id="gameArea"></div>
<div id="score">Score: 0</div>
<div id="message"></div>

<div class="controls" id="controls" style="display:none;">
  <button onclick="stopGame()">Stop</button>
  <button onclick="backToIntro()">Back</button>
  <button onclick="restartLevel()">Restart</button>
  <button onclick="nextLevel()">Next Level</button>
</div>

<script>
const level1 = [
  { question: "‡§ï‡§ø‡§∏ ‡§ï‡§µ‡§ø ‡§ï‡•Ä ‡§Ø‡§π ‡§™‡§Ç‡§ï‡•ç‡§§‡§ø ‡§π‡•à - '‡§Æ‡§ß‡•Å‡§∞ ‡§∏‡•ç‡§Æ‡•É‡§§‡§ø ‡§ï‡•Ä ‡§∂‡•Ä‡§§‡§≤ ‡§õ‡§æ‡§Ø‡§æ'?", options: ["‡§∏‡•Ç‡§∞‡§¶‡§æ‡§∏", "‡§∞‡§æ‡§Æ‡§ß‡§æ‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§π '‡§¶‡§ø‡§®‡§ï‡§∞'", "‡§π‡§∞‡§ø‡§µ‡§Ç‡§∂ ‡§∞‡§æ‡§Ø ‡§¨‡§ö‡•ç‡§ö‡§®"], answer: "‡§π‡§∞‡§ø‡§µ‡§Ç‡§∂ ‡§∞‡§æ‡§Ø ‡§¨‡§ö‡•ç‡§ö‡§®" },
  { question: "‡§ï‡§ø‡§∏ ‡§ï‡§µ‡§ø ‡§®‡•á '‡§Æ‡•á‡§∞‡•Ä ‡§ï‡§µ‡§ø‡§§‡§æ ‡§Æ‡•á‡§∞‡•Ä ‡§Ü‡§§‡•ç‡§Æ‡§æ' ‡§≤‡§ø‡§ñ‡§æ?", options: ["‡§Æ‡§æ‡§ñ‡§®‡§≤‡§æ‡§≤ ‡§ö‡§§‡•Å‡§∞‡•ç‡§µ‡•á‡§¶‡•Ä", "‡§∞‡§æ‡§Æ‡§ß‡§æ‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§π '‡§¶‡§ø‡§®‡§ï‡§∞'", "‡§∏‡•Ç‡§∞‡§¶‡§æ‡§∏"], answer: "‡§∞‡§æ‡§Æ‡§ß‡§æ‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§π '‡§¶‡§ø‡§®‡§ï‡§∞'" },
  { question: "‡§ï‡§ø‡§∏ ‡§ï‡§µ‡§ø ‡§ï‡•Ä ‡§™‡•ç‡§∞‡§∏‡§ø‡§¶‡•ç‡§ß ‡§ï‡§æ‡§µ‡•ç‡§Ø ‡§∞‡§ö‡§®‡§æ ‡§π‡•à - '‡§Ö‡§ó‡•ç‡§®‡§ø‡§™‡§•'?", options: ["‡§∏‡•Ç‡§∞‡§¶‡§æ‡§∏", "‡§∞‡§æ‡§Æ‡§ß‡§æ‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§π '‡§¶‡§ø‡§®‡§ï‡§∞'", "‡§Æ‡§π‡§æ‡§¶‡•á‡§µ‡•Ä ‡§µ‡§∞‡•ç‡§Æ‡§æ"], answer: "‡§∞‡§æ‡§Æ‡§ß‡§æ‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§π '‡§¶‡§ø‡§®‡§ï‡§∞'" },
  { question: "‡§ï‡§ø‡§∏ ‡§ï‡§µ‡§ø ‡§ï‡•Ä ‡§Ø‡§π ‡§™‡§Ç‡§ï‡•ç‡§§‡§ø ‡§π‡•à - '‡§ï‡•ã‡§à ‡§Ö‡§™‡§®‡•á ‡§ò‡§∞ ‡§Æ‡•á‡§Ç ‡§®‡§π‡•Ä‡§Ç ‡§π‡•ã‡§§‡§æ'? ", options: ["‡§∏‡•Å‡§≠‡§¶‡•ç‡§∞‡§æ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä ‡§ö‡•å‡§π‡§æ‡§®", "‡§∏‡•Ç‡§∞‡§¶‡§æ‡§∏", "‡§Æ‡§π‡§æ‡§¶‡•á‡§µ‡•Ä ‡§µ‡§∞‡•ç‡§Æ‡§æ"], answer: "‡§∏‡•Å‡§≠‡§¶‡•ç‡§∞‡§æ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä ‡§ö‡•å‡§π‡§æ‡§®" },
  { question: "‡§ï‡•å‡§® ‡§∏‡§æ ‡§ï‡§µ‡§ø '‡§®‡•Ä‡§≤‡§µ‡§∞‡•ç‡§£‡§æ' ‡§∞‡§ö‡§®‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡§∏‡§ø‡§¶‡•ç‡§ß ‡§π‡•à?", options: ["‡§∏‡•Ç‡§∞‡§¶‡§æ‡§∏", "‡§∞‡§æ‡§Æ‡§ß‡§æ‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§π '‡§¶‡§ø‡§®‡§ï‡§∞'", "‡§ú‡§Ø‡§∂‡§Ç‡§ï‡§∞ ‡§™‡•ç‡§∞‡§∏‡§æ‡§¶"], answer: "‡§ú‡§Ø‡§∂‡§Ç‡§ï‡§∞ ‡§™‡•ç‡§∞‡§∏‡§æ‡§¶" }
];

const level2 = [
  { question: "‡§ï‡§ø‡§∏ ‡§ï‡§µ‡§ø ‡§®‡•á '‡§Ö‡§Æ‡§∞ ‡§™‡•Å‡§§‡•ç‡§∞' ‡§≤‡§ø‡§ñ‡§æ?", options: ["‡§∏‡•Ç‡§∞‡§¶‡§æ‡§∏", "‡§Æ‡§π‡§æ‡§¶‡•á‡§µ‡•Ä ‡§µ‡§∞‡•ç‡§Æ‡§æ", "‡§∞‡§æ‡§Æ‡§ß‡§æ‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§π '‡§¶‡§ø‡§®‡§ï‡§∞'"], answer: "‡§Æ‡§π‡§æ‡§¶‡•á‡§µ‡•Ä ‡§µ‡§∞‡•ç‡§Æ‡§æ" },
  { question: "‡§ï‡§ø‡§∏ ‡§ï‡§µ‡§ø ‡§®‡•á '‡§ï‡•ã‡§∂‡§ø‡§∂ ‡§ï‡§∞ ‡§â‡§∏‡•á ‡§™‡§æ‡§®‡•á ‡§ï‡•Ä' ‡§ï‡§π‡§æ?", options: ["‡§∏‡•Ç‡§∞‡§¶‡§æ‡§∏", "‡§π‡§∞‡§ø‡§µ‡§Ç‡§∂ ‡§∞‡§æ‡§Ø ‡§¨‡§ö‡•ç‡§ö‡§®", "‡§∞‡§æ‡§Æ‡§ß‡§æ‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§π '‡§¶‡§ø‡§®‡§ï‡§∞'"], answer: "‡§π‡§∞‡§ø‡§µ‡§Ç‡§∂ ‡§∞‡§æ‡§Ø ‡§¨‡§ö‡•ç‡§ö‡§®" },
  { question: "‡§ï‡•å‡§® ‡§∏‡§æ ‡§ï‡§µ‡§ø '‡§¨‡§ü‡•ã‡§π‡§ø‡§Ø‡§æ' ‡§∞‡§ö‡§®‡§æ ‡§ï‡•á ‡§≤‡§ø‡§è ‡§™‡•ç‡§∞‡§∏‡§ø‡§¶‡•ç‡§ß ‡§π‡•à?", options: ["‡§∏‡•Å‡§≠‡§¶‡•ç‡§∞‡§æ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä ‡§ö‡•å‡§π‡§æ‡§®", "‡§ú‡§Ø‡§∂‡§Ç‡§ï‡§∞ ‡§™‡•ç‡§∞‡§∏‡§æ‡§¶", "‡§∏‡•Ç‡§∞‡§¶‡§æ‡§∏"], answer: "‡§∏‡•Å‡§≠‡§¶‡•ç‡§∞‡§æ‡§ï‡•Å‡§Æ‡§æ‡§∞‡•Ä ‡§ö‡•å‡§π‡§æ‡§®" },
  { question: "‡§ï‡§ø‡§∏ ‡§ï‡§µ‡§ø ‡§ï‡•Ä ‡§∞‡§ö‡§®‡§æ ‡§Æ‡•á‡§Ç '‡§∏‡•Ç‡§∞‡§ú ‡§ï‡•Ä ‡§≤‡§æ‡§≤‡§ø‡§Æ‡§æ' ‡§ï‡§æ ‡§µ‡§∞‡•ç‡§£‡§® ‡§π‡•à?", options: ["‡§Æ‡§π‡§æ‡§¶‡•á‡§µ‡•Ä ‡§µ‡§∞‡•ç‡§Æ‡§æ", "‡§π‡§∞‡§ø‡§µ‡§Ç‡§∂ ‡§∞‡§æ‡§Ø ‡§¨‡§ö‡•ç‡§ö‡§®", "‡§∞‡§æ‡§Æ‡§ß‡§æ‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§π '‡§¶‡§ø‡§®‡§ï‡§∞'"], answer: "‡§∞‡§æ‡§Æ‡§ß‡§æ‡§∞‡•Ä ‡§∏‡§ø‡§Ç‡§π '‡§¶‡§ø‡§®‡§ï‡§∞'" },
  { question: "‡§ï‡§ø‡§∏ ‡§ï‡§µ‡§ø ‡§®‡•á '‡§ó‡•Ä‡§§‡§æ‡§Ç‡§ú‡§≤‡§ø' ‡§≤‡§ø‡§ñ‡•Ä?", options: ["‡§∞‡§µ‡•Ä‡§Ç‡§¶‡•ç‡§∞‡§®‡§æ‡§• ‡§ü‡•à‡§ó‡•ã‡§∞", "‡§∏‡•Ç‡§∞‡§¶‡§æ‡§∏", "‡§ú‡§Ø‡§∂‡§Ç‡§ï‡§∞ ‡§™‡•ç‡§∞‡§∏‡§æ‡§¶"], answer: "‡§∞‡§µ‡•Ä‡§Ç‡§¶‡•ç‡§∞‡§®‡§æ‡§• ‡§ü‡•à‡§ó‡•ã‡§∞" }
];

let questions = level1;
let score = 0;
let currentQuestion = 0;
const gameArea = document.getElementById("gameArea");
const scoreEl = document.getElementById("score");
const messageEl = document.getElementById("message");

function startGame() {
  document.getElementById("intro").style.display = "none";
  gameArea.style.display = "block";
  document.getElementById("controls").style.display = "block";
  currentQuestion = 0;
  score = 0;
  scoreEl.innerText = "Score: " + score;
  showQuestion();
}

function stopGame(){
  messageEl.innerText = `‚èπÔ∏è ‡§ñ‡•á‡§≤ ‡§∞‡•ã‡§ï ‡§¶‡§ø‡§Ø‡§æ ‡§ó‡§Ø‡§æ!\nFinal Score: ${score}`;
  gameArea.innerHTML = "";
}

function backToIntro(){
  document.getElementById("intro").style.display = "block";
  gameArea.style.display = "none";
  document.getElementById("controls").style.display = "none";
  score = 0;
  currentQuestion = 0;
  scoreEl.innerText = "Score: 0";
  messageEl.innerText = "";
  questions = level1;
}

function restartLevel(){
  score = 0;
  currentQuestion = 0;
  scoreEl.innerText = "Score: 0";
  showQuestion();
}

function nextLevel(){
  questions = level2;
  score = 0;
  currentQuestion = 0;
  scoreEl.innerText = "Score: 0";
  messageEl.innerText = "";
  showQuestion();
}

function showQuestion() {
  gameArea.innerHTML = "";
  messageEl.innerText = "";

  if(currentQuestion >= questions.length){
    gameArea.innerHTML = "";
    messageEl.style.color = "#1b5e20";
    messageEl.style.fontSize = "28px";
    messageEl.innerText = `üéâ Game Over!\n‡§Ü‡§™‡§ï‡§æ Final Score: ${score}\n‡§Ü‡§™‡§®‡•á ‡§¨‡§π‡•Å‡§§ ‡§Ö‡§ö‡•ç‡§õ‡•á ‡§™‡•ç‡§∞‡§Ø‡§æ‡§∏ ‡§ï‡§ø‡§è! ‚úÖ`;
    return;
  }

  const q = questions[currentQuestion];
  const questionDiv = document.createElement("div");
  questionDiv.style.fontSize = "20px";
  questionDiv.style.marginBottom = "15px";
  questionDiv.innerText = q.question;
  gameArea.appendChild(questionDiv);

  const lanes = [50, 200, 350];
  q.options.forEach((opt,index)=>{
    const bubble = document.createElement("div");
    bubble.classList.add("bubble");
    bubble.style.top = lanes[index]+"px";
    bubble.style.left = Math.random() * 600 + "px";
    bubble.innerText = opt;
    gameArea.appendChild(bubble);

    let posX = parseInt(bubble.style.left);
    const move = setInterval(()=>{
      posX += Math.random()*2;
      if(posX > 700) posX = -120;
      bubble.style.left = posX + "px";
    },30);

    bubble.onclick = ()=>{
      clearInterval(move);
      if(opt === q.answer){
        score +=10;
        messageEl.innerText = "‚úÖ ‡§∏‡§π‡•Ä!";
      } else {
        score -=5;
        messageEl.innerText = "‚ùå ‡§ó‡§≤‡§§!";
      }
      scoreEl.innerText = "Score: "+score;
      currentQuestion++;
      setTimeout(showQuestion, 1000);
    }
  });
}
</script>
{% endblock %}
